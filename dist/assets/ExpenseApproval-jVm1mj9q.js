import{_ as L,a as _,r as $,k as O,c as y,o as f,d as e,w as t,e as o,B as z,C as G,h as H,b,t as r,g as n,j as J,F as K,i as P,E as V}from"./index-D4YcMouI.js";const Q={class:"expense-approval-container"},W={key:0,class:"approval-detail"},X={class:"dialog-footer"},Y={__name:"ExpenseApproval",setup(Z){const g=_([{id:"2023060001",applicantName:"张三",department:"销售部",expenseType:"差旅费",amount:2580.5,purpose:"客户拜访交通及住宿费用",submitTime:"2023-06-10 09:30:45",status:"pending"},{id:"2023060002",applicantName:"李四",department:"市场部",expenseType:"业务招待费",amount:1850,purpose:"与潜在客户洽谈业务",submitTime:"2023-06-11 14:20:33",status:"pending"},{id:"2023060003",applicantName:"王五",department:"研发部",expenseType:"办公用品",amount:3200,purpose:"购买团队开发设备",submitTime:"2023-06-12 11:05:27",status:"pending"},{id:"2023060004",applicantName:"赵六",department:"人力资源部",expenseType:"培训费",amount:5e3,purpose:"员工技能提升培训",submitTime:"2023-06-13 16:45:12",status:"pending"}]),w=_(!1),p=_(null),m=_(!1),d=$({result:"",comment:""}),k=[{value:"approved",label:"同意"},{value:"rejected",label:"拒绝"}],N={result:[{required:!0,message:"请选择审批结果",trigger:"change"}],comment:[{required:!0,message:"请输入审批意见",trigger:"blur"}]},x=_(null),h=i=>{p.value=i,m.value=!0,d.result="",d.comment=""},C=async()=>{x.value&&await x.value.validate((i,a)=>{if(i){const s=V({message:"正在提交审批结果...",type:"info",duration:0});setTimeout(()=>{s.close();const v=g.value.findIndex(c=>c.id===p.value.id);v!==-1&&(g.value[v].status=d.result),V({message:"审批操作已完成！",type:"success"}),m.value=!1},1e3)}})},F=i=>({pending:"warning",approved:"success",rejected:"danger"})[i]||"info",M=i=>({pending:"待审批",approved:"已同意",rejected:"已拒绝"})[i]||"未知状态";return O(()=>{w.value=!0,setTimeout(()=>{w.value=!1},800)}),(i,a)=>{const s=o("el-table-column"),v=o("el-tag"),c=o("el-button"),A=o("el-table"),B=o("el-card"),u=o("el-descriptions-item"),D=o("el-descriptions"),E=o("el-divider"),j=o("el-radio"),R=o("el-radio-group"),T=o("el-form-item"),S=o("el-input"),U=o("el-form"),q=o("el-dialog"),I=z("loading");return f(),y("div",Q,[e(B,{class:"approval-card"},{header:t(()=>a[4]||(a[4]=[b("div",{class:"card-header"},[b("h2",null,"费用审批")],-1)])),default:t(()=>[G((f(),H(A,{data:g.value,style:{width:"100%"},border:"","row-key":"id"},{default:t(()=>[e(s,{prop:"id",label:"申请编号",width:"120"}),e(s,{prop:"applicantName",label:"申请人",width:"100"}),e(s,{prop:"department",label:"所属部门",width:"120"}),e(s,{prop:"expenseType",label:"费用类型",width:"120"}),e(s,{prop:"amount",label:"金额",width:"120"},{default:t(l=>[b("span",null,"¥ "+r(l.row.amount.toFixed(2)),1)]),_:1}),e(s,{prop:"purpose",label:"用途","min-width":"200","show-overflow-tooltip":""}),e(s,{prop:"submitTime",label:"提交时间",width:"180"}),e(s,{prop:"status",label:"状态",width:"100"},{default:t(l=>[e(v,{type:F(l.row.status)},{default:t(()=>[n(r(M(l.row.status)),1)]),_:2},1032,["type"])]),_:1}),e(s,{label:"操作",width:"120",fixed:"right"},{default:t(l=>[e(c,{link:"",type:"primary",onClick:ee=>h(l.row),disabled:l.row.status!=="pending"},{default:t(()=>a[5]||(a[5]=[n(" 审批 ")])),_:2},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"])),[[I,w.value]])]),_:1}),e(q,{modelValue:m.value,"onUpdate:modelValue":a[3]||(a[3]=l=>m.value=l),title:"费用申请审批",width:"600px","destroy-on-close":""},{footer:t(()=>[b("span",X,[e(c,{onClick:a[2]||(a[2]=l=>m.value=!1)},{default:t(()=>a[7]||(a[7]=[n("取消")])),_:1}),e(c,{type:"primary",onClick:C},{default:t(()=>a[8]||(a[8]=[n("提交审批")])),_:1})])]),default:t(()=>[p.value?(f(),y("div",W,[e(D,{column:2,border:""},{default:t(()=>[e(u,{label:"申请编号"},{default:t(()=>[n(r(p.value.id),1)]),_:1}),e(u,{label:"申请人"},{default:t(()=>[n(r(p.value.applicantName),1)]),_:1}),e(u,{label:"所属部门"},{default:t(()=>[n(r(p.value.department),1)]),_:1}),e(u,{label:"费用类型"},{default:t(()=>[n(r(p.value.expenseType),1)]),_:1}),e(u,{label:"金额"},{default:t(()=>[n("¥ "+r(p.value.amount.toFixed(2)),1)]),_:1}),e(u,{label:"提交时间"},{default:t(()=>[n(r(p.value.submitTime),1)]),_:1}),e(u,{label:"用途",span:2},{default:t(()=>[n(r(p.value.purpose),1)]),_:1})]),_:1}),e(E,{"content-position":"center"},{default:t(()=>a[6]||(a[6]=[n("审批意见")])),_:1}),e(U,{ref_key:"approvalFormRef",ref:x,model:d,rules:N,"label-width":"100px"},{default:t(()=>[e(T,{label:"审批结果",prop:"result"},{default:t(()=>[e(R,{modelValue:d.result,"onUpdate:modelValue":a[0]||(a[0]=l=>d.result=l)},{default:t(()=>[(f(),y(K,null,P(k,l=>e(j,{key:l.value,label:l.value},{default:t(()=>[n(r(l.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1}),e(T,{label:"审批意见",prop:"comment"},{default:t(()=>[e(S,{modelValue:d.comment,"onUpdate:modelValue":a[1]||(a[1]=l=>d.comment=l),type:"textarea",rows:"3",placeholder:"请输入审批意见"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):J("",!0)]),_:1},8,["modelValue"])])}}},ae=L(Y,[["__scopeId","data-v-c46f4900"]]);export{ae as default};
