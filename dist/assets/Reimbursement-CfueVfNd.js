import{_ as K,a as _,r as O,k as Q,c as b,o as f,d as e,w as t,e as s,B as W,C as X,h as Y,b as g,t as u,g as o,j as F,F as Z,i as ee,E as A}from"./index-D4YcMouI.js";const te={class:"reimbursement-container"},ae={key:0,class:"reimbursement-detail"},le={key:0,class:"payment-form"},ne={class:"dialog-footer"},oe={__name:"Reimbursement",setup(se){const w=_([{id:"2023070001",applicantName:"张三",department:"销售部",expenseType:"差旅费",amount:2580.5,status:"pending",submitTime:"2023-07-01 10:15:30",approvalTime:"2023-07-02 14:30:00",paymentStatus:"unpaid"},{id:"2023070002",applicantName:"李四",department:"市场部",expenseType:"业务招待费",amount:1850,status:"approved",submitTime:"2023-07-03 09:20:15",approvalTime:"2023-07-04 11:45:20",paymentStatus:"unpaid"},{id:"2023070003",applicantName:"王五",department:"研发部",expenseType:"办公用品",amount:3200,status:"approved",submitTime:"2023-07-05 16:10:45",approvalTime:"2023-07-06 10:30:00",paymentStatus:"paid"},{id:"2023070004",applicantName:"赵六",department:"人力资源部",expenseType:"培训费",amount:5e3,status:"rejected",submitTime:"2023-07-07 14:25:30",approvalTime:"2023-07-08 09:15:10",paymentStatus:"unpaid"}]),x=_(!1),n=_(null),k=_(!1),y=_(!1),d=O({paymentMethod:"",paymentAccount:"",paymentDate:"",remark:""}),R=[{value:"bank",label:"银行转账"},{value:"cash",label:"现金支付"},{value:"wechat",label:"微信支付"},{value:"alipay",label:"支付宝"}],U={paymentMethod:[{required:!0,message:"请选择付款方式",trigger:"change"}],paymentAccount:[{required:!0,message:"请输入付款账号",trigger:"blur"}],paymentDate:[{required:!0,message:"请选择付款日期",trigger:"change"}]},T=_(null),B=p=>{n.value=p,k.value=!0},j=p=>{n.value=p,y.value=!0,d.paymentMethod="",d.paymentAccount="",d.paymentDate="",d.remark=""},P=async()=>{T.value&&await T.value.validate((p,a)=>{if(p){const r=A({message:"正在处理付款...",type:"info",duration:0});setTimeout(()=>{r.close();const m=w.value.findIndex(c=>c.id===n.value.id);m!==-1&&(w.value[m].paymentStatus="paid"),A({message:"付款处理成功！",type:"success"}),y.value=!1},1e3)}})},V=p=>({pending:"warning",approved:"success",rejected:"danger"})[p]||"info",h=p=>({pending:"待审批",approved:"已同意",rejected:"已拒绝"})[p]||"未知状态",M=p=>({unpaid:"warning",paid:"success"})[p]||"info",S=p=>({unpaid:"未付款",paid:"已付款"})[p]||"未知状态";return Q(()=>{x.value=!0,setTimeout(()=>{x.value=!1},800)}),(p,a)=>{const r=s("el-table-column"),m=s("el-tag"),c=s("el-button"),q=s("el-table"),E=s("el-card"),i=s("el-descriptions-item"),D=s("el-descriptions"),N=s("el-dialog"),L=s("el-alert"),$=s("el-option"),I=s("el-select"),v=s("el-form-item"),C=s("el-input"),z=s("el-date-picker"),G=s("el-form"),H=W("loading");return f(),b("div",te,[e(E,{class:"reimbursement-card"},{header:t(()=>a[7]||(a[7]=[g("div",{class:"card-header"},[g("h2",null,"报销管理")],-1)])),default:t(()=>[X((f(),Y(q,{data:w.value,style:{width:"100%"},border:"","row-key":"id"},{default:t(()=>[e(r,{prop:"id",label:"报销单号",width:"120"}),e(r,{prop:"applicantName",label:"申请人",width:"100"}),e(r,{prop:"department",label:"所属部门",width:"120"}),e(r,{prop:"expenseType",label:"费用类型",width:"120"}),e(r,{prop:"amount",label:"金额",width:"120"},{default:t(l=>[g("span",null,"¥ "+u(l.row.amount.toFixed(2)),1)]),_:1}),e(r,{prop:"status",label:"审批状态",width:"100"},{default:t(l=>[e(m,{type:V(l.row.status)},{default:t(()=>[o(u(h(l.row.status)),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"paymentStatus",label:"付款状态",width:"100"},{default:t(l=>[e(m,{type:M(l.row.paymentStatus)},{default:t(()=>[o(u(S(l.row.paymentStatus)),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"submitTime",label:"提交时间",width:"160"}),e(r,{label:"操作",width:"180",fixed:"right"},{default:t(l=>[e(c,{link:"",type:"primary",onClick:J=>B(l.row)},{default:t(()=>a[8]||(a[8]=[o(" 查看 ")])),_:2},1032,["onClick"]),e(c,{link:"",type:"success",onClick:J=>j(l.row),disabled:l.row.status!=="approved"||l.row.paymentStatus==="paid"},{default:t(()=>a[9]||(a[9]=[o(" 付款 ")])),_:2},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"])),[[H,x.value]])]),_:1}),e(N,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=l=>k.value=l),title:"报销单详情",width:"600px","destroy-on-close":""},{default:t(()=>[n.value?(f(),b("div",ae,[e(D,{column:2,border:""},{default:t(()=>[e(i,{label:"报销单号"},{default:t(()=>[o(u(n.value.id),1)]),_:1}),e(i,{label:"申请人"},{default:t(()=>[o(u(n.value.applicantName),1)]),_:1}),e(i,{label:"所属部门"},{default:t(()=>[o(u(n.value.department),1)]),_:1}),e(i,{label:"费用类型"},{default:t(()=>[o(u(n.value.expenseType),1)]),_:1}),e(i,{label:"金额"},{default:t(()=>[o("¥ "+u(n.value.amount.toFixed(2)),1)]),_:1}),e(i,{label:"审批状态"},{default:t(()=>[e(m,{type:V(n.value.status)},{default:t(()=>[o(u(h(n.value.status)),1)]),_:1},8,["type"])]),_:1}),e(i,{label:"提交时间"},{default:t(()=>[o(u(n.value.submitTime),1)]),_:1}),e(i,{label:"审批时间"},{default:t(()=>[o(u(n.value.approvalTime),1)]),_:1}),e(i,{label:"付款状态"},{default:t(()=>[e(m,{type:M(n.value.paymentStatus)},{default:t(()=>[o(u(S(n.value.paymentStatus)),1)]),_:1},8,["type"])]),_:1})]),_:1})])):F("",!0)]),_:1},8,["modelValue"]),e(N,{modelValue:y.value,"onUpdate:modelValue":a[6]||(a[6]=l=>y.value=l),title:"处理付款",width:"500px","destroy-on-close":""},{footer:t(()=>[g("span",ne,[e(c,{onClick:a[5]||(a[5]=l=>y.value=!1)},{default:t(()=>a[10]||(a[10]=[o("取消")])),_:1}),e(c,{type:"primary",onClick:P},{default:t(()=>a[11]||(a[11]=[o("确认付款")])),_:1})])]),default:t(()=>[n.value?(f(),b("div",le,[e(L,{title:"请确认付款信息无误后再提交",type:"warning",closable:!1,style:{"margin-bottom":"20px"}}),e(D,{column:1,border:"",size:"small",style:{"margin-bottom":"20px"}},{default:t(()=>[e(i,{label:"报销单号"},{default:t(()=>[o(u(n.value.id),1)]),_:1}),e(i,{label:"申请人"},{default:t(()=>[o(u(n.value.applicantName),1)]),_:1}),e(i,{label:"金额"},{default:t(()=>[o("¥ "+u(n.value.amount.toFixed(2)),1)]),_:1})]),_:1}),e(G,{ref_key:"paymentFormRef",ref:T,model:d,rules:U,"label-width":"100px"},{default:t(()=>[e(v,{label:"付款方式",prop:"paymentMethod"},{default:t(()=>[e(I,{modelValue:d.paymentMethod,"onUpdate:modelValue":a[1]||(a[1]=l=>d.paymentMethod=l),placeholder:"请选择付款方式",style:{width:"100%"}},{default:t(()=>[(f(),b(Z,null,ee(R,l=>e($,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"付款账号",prop:"paymentAccount"},{default:t(()=>[e(C,{modelValue:d.paymentAccount,"onUpdate:modelValue":a[2]||(a[2]=l=>d.paymentAccount=l),placeholder:"请输入付款账号"},null,8,["modelValue"])]),_:1}),e(v,{label:"付款日期",prop:"paymentDate"},{default:t(()=>[e(z,{modelValue:d.paymentDate,"onUpdate:modelValue":a[3]||(a[3]=l=>d.paymentDate=l),type:"date",placeholder:"选择付款日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(v,{label:"备注"},{default:t(()=>[e(C,{modelValue:d.remark,"onUpdate:modelValue":a[4]||(a[4]=l=>d.remark=l),type:"textarea",rows:"3",placeholder:"请输入备注信息（选填）"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):F("",!0)]),_:1},8,["modelValue"])])}}},pe=K(oe,[["__scopeId","data-v-9f455a36"]]);export{pe as default};
